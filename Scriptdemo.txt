-- [[ GEMINI GRAVITY EDITION - ALL IN ONE ]] --
-- Tính năng: Fast Attack (No Delay), Attack Range, Auto Farm Level, Auto Stats, Anti-AFK

_G.Kaitun_Mode = true
_G.Fast_Attack = true
_G.Attack_Range = 15 -- Độ xa của cú đấm
_G.Bring_Mob = true

-- 1. HỆ THỐNG FAST ATTACK & ATTACK RANGE (SIÊU MƯỢT)
local CombatFramework = require(game:GetService("Players").LocalPlayer.PlayerScripts.CombatFramework)
local CameraShaker = require(game:GetService("ReplicatedStorage").Util.CameraShaker)
CameraShaker:Stop() -- Tắt rung màn hình để đỡ lag

spawn(function()
    while _G.Fast_Attack and task.wait() do
        pcall(function()
            if _G.Kaitun_Mode then
                -- Bypass Delay đánh của game
                local CurrentWeapon = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
                if CurrentWeapon then
                    -- Đấm xa (Hitbox)
                    for _, v in pairs(game.Workspace.Enemies:GetChildren()) do
                        if v:FindFirstChild("HumanoidRootPart") and (v.HumanoidRootPart.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= _G.Attack_Range + 20 then
                            -- Gửi lệnh đánh liên tục không chờ animation
                            game:GetService("VirtualUser"):CaptureController()
                            game:GetService("VirtualUser"):ClickButton1(Vector2.new(0,0))
                            -- Remote đánh chính chủ Blox Fruit (Update 2026)
                            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Attack", v.HumanoidRootPart)
                        end
                    end
                end
            end
        end)
    end
end)

-- 2. HỆ THỐNG KAITUN THÔNG MINH (TỰ TÌM QUÁI THEO LV)
spawn(function()
    while _G.Kaitun_Mode and task.wait(0.5) do
        pcall(function()
            local Player = game.Players.LocalPlayer
            local Char = Player.Character
            
            -- Tìm con quái có Level cao nhất nhưng vẫn thấp hơn hoặc bằng Level mình
            local TargetMob = nil
            local MaxLv = 0
            
            for _, v in pairs(game.Workspace.Enemies:GetChildren()) do
                -- Logic tìm quái thông minh (Tự nhận diện Level quái trong Workspace)
                if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                    -- Bay đến quái và giữ khoảng cách Safe
                    Char.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0, 10, 0)
                    
                    -- Gom quái (Bring Mobs)
                    if _G.Bring_Mob then
                        v.HumanoidRootPart.CanCollide = false
                        v.HumanoidRootPart.CFrame = Char.HumanoidRootPart.CFrame * CFrame.new(0, -10, 0)
                    end
                end
            end
        end)
    end
end)

-- 3. AUTO STATS (CỘNG ĐIỂM THÔNG MINH)
spawn(function()
    while _G.Kaitun_Mode do
        task.wait(1)
        local args = {"AddPoint", "Melee", 3} -- Ưu tiên Melee để đấm nhanh
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AddPoint", "Defense", 3)
    end
end)

-- 4. ANTI-AFK (CHỐNG VĂNG GAME 100%)
local vu = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:Connect(function()
    vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    wait(1)
    vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)

print("--- GEMINI GRAVITY V1 LOADED | LEVEL 2800+ OK ---")
